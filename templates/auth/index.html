{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
   <link href="{% static 'css/main.css' %}" rel="stylesheet" type="text/css">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="margin: 15px 15px">
<form  method="post">
    {% csrf_token %}
<div class="flex-container">
    <div class="row">
   <div class="col-md-3 ">
       
<div class="card bg-light card border-success  h-100">
  <div class="card-header"><b style="font-size: 24px">Auftrag(Order)</b></div>
  <div class="card-body">
     <div class="form-group">
           <div class="d-flex align-items-end flex-column">
          <div class="p-2" style="width: 110px"><br/>
            <input type="reset" class="form-control btn btn-outline-warning" id="New" placeholder="Reset"></div>
        </div>
          <div class="form-group">
              <label for="customer"><b>Kunde</b></label><br>
            <select class="form-select" id="customer" name="customer">
             <option>.....</option>
             <option>Vertrieb</option>
             <option>Lager</option>
             <option>Service</option>
             <option>Nicht bekannt</option>
            </select>
                  <br>
                  <br>
            <label for="Production order"><b>Fertigungsauftrag</b></label>
            <input type="text" class="form-control" id="Production order" name="production_order" placeholder="Fertigungsauftrag">
          </div>

  </div>
</div>
</div>
</div>

    <div class="col-md-9">
        <div class="flex-container">
        <div class="row">

            <div class="col-md-12">
               <div class="card bg-light mb-3 card bg-light card border-success h-100">
<div class="card-header"><b style="font-size: 30px">Baugruppe(Description)</b></div>
  <div class="card-body ">
     <div>
           <div class="d-flex align-items-end flex-column">
          <div class="p-2" style="width: 110px"><br/>
            <input type="reset" class="form-control btn btn-outline-warning" id="New" placeholder="Reset"></div>
        </div>
         <div class="flex-container">
             <div class="row">
             <div class="col-md-6">
                   <div >
          <label for="name"><b>Name</b></label>
            <input type="text" class="form-control" id="name" name="name" placeholder="Product">

                 <label for="number"><b>Anzahl</b></label>
            <input type="number" class="form-control" id="number" name="number" placeholder="Anzahl....">
          </div>

             </div>

                 <div class="col-md-6">
                       <label for="IDs"><b>Identifikation (Nr.) </b></label>
            <input type="number" class="form-control" id="IDs" name="IDs" placeholder="Identifikation....">
                 <label for="Design"><b>Zeichnung (Nr)</b></label>
            <textarea class="form-control" id="Design" name="design" placeholder="Zeichnung...."></textarea>
                                  </div>

         </div>




            </div>
            </div>

        </div>
        </div>

  </div>
</div>
        </div>
    </div>
</div>
<br>
        <div class="row">
        <div class="col-8">
            <div class="card bg-light card border-success h-100">
             <div class="card-header"> <b style="font-size: 30px">Herstellungsschritt (Manufacturing step)</b></div>
            <div class="card-body ">
 <label for="employee"><b>Mitarbeiter(Employee)</b></label><br>
            <select class="form-select" id="employee" name="employee">
             <option>......</option>
             <option>Stephan</option>
             <option>Govanni</option>
             <option>Jan</option>
             <option>Nasir</option>
             <option>Michaela</option>
             <option>Alex</option>
            </select>
            <br><br>
                  <label for="tool"><b>Werkzeug(Tool)</b></label><br>
        <select class="form-select" id="tool" name="tool">
         
         
             <option>.....</option>
            <option>Vorbereiten</option>
            <option>Laser</option>
             <option>Jan</option>
             <option>Biege</option>
             <option>Schweißen</option>
             <option>Schleifen</option>
             <option>Entgraten</option>
            <option>Drehen</option>

        </select>
                <br>
                <br>
        <label for="work_step"><b>Arbeitsschritt(work_step)</b></label><br>
                   <select class="form-select" id="work_step" name="work_step">
             <option>.......</option>
             <option>Fräsen</option>
             <option>Laser</option>
             <option>Bohre</option>
             <option>Senken</option>
             <option>Gewinde</option>
             <option>Montieren</option>
             <option>Transport</option>
            <option>Qualität</option>

        </select>
<br><br>
           <label for="Workplace"><b>Arbeitsplatz(Workplace)</b></label>
          <input  type="text"  class="form-control" id="Workplace" name="workplace">
        </div>
                </div>
        </div>
            
            <div class="col-4">
               <div class="card border-warning h-100">
  <div class="card-header"><b style="font-size: 25px">Zeitaufzeichnung</b></div>
  <div class="card-body text-center">
     <label for="dateto1"><b style="font-size: 24px">Das aktuelle Datum</b></label>
            <input type="date" class="form-control" id="dateto1"   name="current_date" readonly>
      <br>
      <br>
        <div id="timer" class="mb-3  card-header-pills" style="font-size: 24px; font-weight: bolder">00:00:00</div>
      <button id="startBtn"  type="button" class="btn btn-primary mr-2" style="font-size: 24px;">Start</button>
      <button id="stopBtn" type="button" class="btn btn-danger" style="font-size: 24px;">Stoppen</button>
       <div class="container d-flex justify-content-center">
{#      <button id="totalTime" class="mt-3  btn btn-info  text-center " name="total_time"#}
{#              style="display: none;font-size: 28px" , disabled></button>#}
          <input type="text" class="mt-3  btn btn-info  text-center"  name="total_time" id="totalTime"  style="display: none;font-size: 28px"/>

        </div>
  </div>
                  
 <button class="btn btn-warning" type="submit" style="font-size: 24px; color:  whitesmoke">Einreichen</button>
                  
               </div>

            </div>
        </div>
</div>
</form>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
 <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
    let startTime;
    let timerInterval;
    let totalElapsedTime = 0;
    let running = false;

    // Function to start the timer
    function startTimer() {
        if (!running) {
            startTime = Date.now() - totalElapsedTime;
            timerInterval = setInterval(updateTimer, 1000);
            running = true;
            document.getElementById("totalTime").style.display = "none";
        }
    }

    // Function to stop the timer and show total time
    function stopTimer() {
        if (running) {
            clearInterval(timerInterval);
            totalElapsedTime = Date.now() - startTime;
            running = false;
            showTotal();
            document.getElementById("startBtn").disabled = true;
            document.getElementById("stopBtn").disabled = true;
        }
    }

    // Function to update the timer display
    function updateTimer() {
        const elapsedTime = Date.now() - startTime;
        const hours = Math.floor(elapsedTime / (1000 * 60 * 60));
        const minutes = Math.floor((elapsedTime % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((elapsedTime % (1000 * 60)) / 1000);
        document.getElementById("timer").innerText = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    // Function to show total time
    function showTotal() {
        const hours = Math.floor(totalElapsedTime / (1000 * 60 * 60));
        const minutes = Math.floor((totalElapsedTime % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((totalElapsedTime % (1000 * 60)) / 1000);
        document.getElementById("totalTime").value = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        document.getElementById("totalTime").style.display = "block";
        console.log(document.getElementById("totalTime").value)

    }

    // Event listeners for start and stop buttons
    document.getElementById("startBtn").addEventListener("click", startTimer);
    document.getElementById("stopBtn").addEventListener("click", stopTimer);

    // Get today's date
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth() + 1; //January is 0!
    var yyyy = today.getFullYear();

    if (dd < 10) {
        dd = '0' + dd;
    }

    if (mm < 10) {
        mm = '0' + mm;
    }

    today = yyyy + '-' + mm + '-' + dd;
    document.getElementById('dateto1').value = today;
    //Running timer 
     // Event listeners for start and stop buttons
    document.getElementById("startBtn").addEventListener("click", startTimer);
    document.getElementById("stopBtn").addEventListener("click", stopTimer);

    // Event listener for beforeunload
    window.addEventListener("beforeunload", function(event) {
        if (running) {
            clearInterval(timerInterval);
            return event.returnValue = 'You have a running timer. Are you sure you want to leave?';
        }
    }); 
</script>
</body>
</html>